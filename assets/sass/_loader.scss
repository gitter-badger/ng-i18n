
@for $i from 1 through 6 {
	@keyframes preload-show-#{$i}{
		from {
			border-left-color: $color;
			transform: rotateZ(60* $i + deg) rotateY(-90deg) rotateX(0deg);
		}
	}
	@keyframes preload-hide-#{$i}{
		to {
			border-left-color: $color;
			transform: rotateZ(60* $i + deg) rotateY(-90deg) rotateX(0deg);
		}
	}

	@keyframes preload-cycle-#{$i}{

		$start-index: $i*5;
		$reverse-index: (80 - $i*5);

		#{$start-index * 1%} {
			border-left-color: $color;
			transform: rotateZ(60* $i + deg) rotateY(90deg) rotateX(0deg);
		}

		#{$start-index + 5%},
		#{$reverse-index * 1%}{
			border-left-color: $highlight-color;
			transform: rotateZ(60* $i + deg) rotateY(0) rotateX(0deg);
		}

		#{$reverse-index + 5%},
		100% {
			border-left-color: $color;
			transform: rotateZ(60* $i + deg) rotateY(90deg) rotateX(0deg);
		}
	}
}

@keyframes preload-flip{
	0% {
		transform: rotateY(0deg) rotateZ(-60deg);
	}

	100% {
		transform: rotateY(360deg) rotateZ(-60deg);
	}
}

.preloader {
	display: block;
	font-size: 20px;
	height: 4.25em;
	left: 50%;
	margin-left: -1.875em;
	margin-top: -2.125em;
	position: absolute;
	top: 50%;
	transform: rotateY(180deg) rotateZ(-60deg);
	transform-origin: center center;
	width: 3.75em;

	.slice {
		border-bottom: 1em solid transparent;
		border-left: 1.875em solid $highlight-color;
		border-radius: 3px 3px 0 0;
		border-right: none;
		border-top: 1.125em solid transparent;
		left: 50%;
		position: absolute;
		top: 0;
		transform-origin: left bottom;
	}

	@for $i from 1 through 6 {
		.slice:nth-child(#{$i}) {
			animation: .15s linear .9 - $i*.08s preload-hide-$i both 1;
			transform: rotateZ(60* $i + deg) rotateY(0deg) rotateX(0);
		}
	}

	&.loading {
		animation: 2s preload-flip steps(2) infinite both;
		@for $i from 1 through 6 {
			.slice:nth-child(#{$i}) {
				animation: 2s preload-cycle-#{$i} linear infinite both;
				transform: rotateZ(60* $i + deg) rotateY(90deg) rotateX(0);
			}
		}
	}

}
